(function(){var nfsVars;
var menuTypeIdMap;
var actionCallbacks;
var config;
var menuData;
var tooltipDuration;
var c2cWidget;
var disableGetLBUnreadCount;
var enableMoxtraTokenCall;
if(window.localStorage){nfsVars=localStorage.getItem("c2cNfsVars");
}nfsVars=nfsVars!=null?JSON.parse(nfsVars):{c2cCustomerSegment:window.c2cCustomerSegment,c2cRelId:window.c2cRelId,c2cLanguage:window.c2cLanguage,c2cDisplayName:window.c2cDisplayName,c2cTandCVersion:window.c2cTandCVersion,c2cMoxtraLang:window.moxtraLang};
nfsVars.c2cUnreadFlag=window.c2cUnreadFlag;
nfsVars.c2cJustLogin=window.c2cJustLogin;
nfsVars.c2cRMAccessToken=window.c2cRMAccessToken;
nfsVars.c2cRMUnreadFlag=window.c2cRMUnreadFlag;
nfsVars.twoFAStatus=window.twoFAStatus;
c2c.setLanguage(nfsVars.c2cLanguage?nfsVars.c2cLanguage:"en_us");
menuTypeIdMap={C:"txtChat",B:"chatBot",R:"rmChat",M:"sendMail"};
actionCallbacks={txtChat:function(){c2cWidget.initLiveChat(null,config.livebankUrl);
},rmChat:function(){c2cWidget.initRMChat(null,nfsVars.c2cRelId);
},chatBot:function(){c2cWidget.initChatBot();
}};
moreOptionsMenu={history:{label:c2c.getContent("chatHistory"),onclick:function(){c2cWidget.initChatHistory();
}}};
disableGetLBUnreadCount=false;
if(window.c2cDisableGetLBUnreadCount===true||window.c2cDisableGetLBUnreadCount==="true"){disableGetLBUnreadCount=true;
}enableMoxtraTokenCall=false;
if(window.c2cEnableMoxtraTokenCall===true||window.c2cEnableMoxtraTokenCall==="true"){enableMoxtraTokenCall=true;
}config={iconPath:"../ibank/theme/default/images/clicktochat/",closeIcon:"x@2x.png",loadingImg:"scorigami.gif",overlayDisabled:true,popupChatWindow:true,chatCloseImg:"arrow-down@2x.png",minimizeChatOnExternalClick:false,minimizeChatOnEscKey:false,draggable:false,actionCallbacks:actionCallbacks,twoFAUrl:"rm_instruction_entry.htm",mxHost:c2cDomainNameJs+"/vnv/api/mxchat-hk",chatbotUrl:chatbotDomainNameJs+"/retail/chatbothk/hk/en/index.html",nfsRefreshTokenUrl:nfsContextPath+"/ibank/live_chat_details_link.htm?a=doFetchRefreshToken",livebankUnreadCheckDisabled:disableGetLBUnreadCount,livebankUnreadCheckUrl:nfsContextPath+"/ibank/live_chat_details_link.htm?a=doGetC2CUnreadCount",livebankUrl:"live_chat_details_link.htm",timeoutRedirectUrl:contextPath+"/login.htm?timeout=1",keepAliveUrlNfs:nfsContextPath+"/ibank/chatbot_session_details_link.htm",moreOptionsMenu:moreOptionsMenu,mxEnableTokenCall:enableMoxtraTokenCall};
nfsVars.mxHost=config.mxHost;
menuData=c2c.menuDataFactory(nfsVars.c2cCustomerSegment,menuTypeIdMap,actionCallbacks,"hk",nfsVars,false);
tooltipDuration=5000;
c2cWidget=new c2c.ClickToChatWidget(config,menuData.data,tooltipDuration,true,nfsVars);
config.actionCallbacks=menuData.actionCallbacks;
window.c2cWidget=c2cWidget;
c2cWidget.init();
})();
